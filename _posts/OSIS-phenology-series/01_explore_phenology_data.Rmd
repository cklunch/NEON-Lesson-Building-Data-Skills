---
layout: post
title: "NEON's Plant Phenology Data"
date:   2016-01-01
authors: [ ]
contributors: [ ] 
dateCreated: 2016-01-01
lastModified: `r format(Sys.time(), "%Y-%m-%d")`
packagesLibraries: [ ]
category: [self-paced-tutorial]
tags: [ ]
mainTag: 
tutorialSeries: [ ]
description: "Brief description in plain text."
code1: use-if-associated-code.R
image:
  feature: lidar_GrandMesa.png
  credit: LiDAR data collected over Grand Mesa, Colorado - National Ecological Observatory Network (NEON)
  creditlink: 
permalink: /R/plant-pheno-data
comments: true
---

{% include _toc.html %}

**R Skill Level:** Intermediate - you've got the basics of `R` down.

<div id="objectives" markdown="1">

# Objectives
After completing this activity, you will:

 * 

## Things Youâ€™ll Need To Complete This Tutorial
You will need the most current version of `R` and, preferably, `RStudio` loaded
on your computer to complete this tutorial.

### Install R Packages
* **NAME:** `install.packages("NAME")`


[More on Packages in R - Adapted from Software Carpentry.]({{site.baseurl}}R/Packages-In-R/)

### Download Data 
(include file that inserts a button to download data from Figshare & text about
data.  Feel free to just add text until the data set is finalized and uploaded).

{% include/dataSubsets/_data_NAME.html %}  

****
{% include/_greyBox-wd-rscript.html %}

****

## Additional Resources

* (links if you want to provide)

</div>

Big Question: Plants change throughout the year - these are phenophases. 
Why do they change? 

Explore Phenology Data 

Download data  
- user guide

Briefly: 

* where is the data from (the topic of site selection)
* how is it collected 
* Which plants/growth form should we choose? 
* growth-form vs. species discussion

Final choice: - ACER


But how do we choose what aspect of phenophase to look at: 

Phenophases that are recorded (deciduous broad-leaf)/ all with Y/N & % of canopy/plant:

* breaking leaf buds 
* increasing leaf size 
* leaves 
* open flowers 
* colored leaves
* falling leaves 

Criteria for choosing 

* something with progress
* comparable across sites or growth forms? 

Final choice: leaves  (main teaching), colored leaves  (challenges)


Status codes
Status intensity

```{r loadStuff}

library(dplyr)
library(ggplot2)

ind <- read.csv('N:/Common/TOS/OSIS_dataLessons/phe_data HARVperindividual_Clean.csv', stringsAsFactors = FALSE )
status <- read.csv('N:/Common/TOS/OSIS_dataLessons/phe_data HARV2014statusintensity_Clean.csv', stringsAsFactors = FALSE)

```


Explore the data, let's get to know what the dataframe looks like.

```{r}
#What are the fieldnames in this dataset?
names(ind)
#how many rows are in the data?
nrow(ind)
#look at the first six rows of data.
head(ind)
#look at the structure of the dataframe.
str(ind)

# What variables are included in this dataset?
names(status)
nrow(status)
head(status)
str(status)

```


join dataframes
```{r}

#select status fields of interest
# create a new object "ind2" to preserve the original object "ind"
ind2 <- select(ind, c(individualID, decimalLatitude, decimalLongitude, geodeticDatum, coordinateUncertainty,
                      elevation, elevationUncertainty, addDate, dropDate))


#Create a new dataframe "phe" that has all of the fields of interest from both original data frames
phe <- left_join(status, ind2, by='individualID')

```

1. Filter by phenophase of interest

```{r setup, include=FALSE}
#see which phenophases are present
unique(phe$phenophaseName)

#subset to just the "leaves" and "Colored leaves" phenophases
# overwrite object "phe" as you know these are the only phenophases you want to work with for now
phe <- filter(phe, phenophaseName=="Leaves" | phenophaseName=="Colored leaves")

# check that it worked
unique(phe$phenophaseName)


```

```{r}

```


4. Calculate the phenophase
total Yes of total Individuals

```{r}

```

Plot - bar graph of % of individuals in different phenophase over course of year. Interval = Daily. 


```{r}

```


Write csv (this will be read in new in subsuquent lessons)



---
layout: post
title: "Using the NEON API in R"
description: "Tutorial for getting data from the NEON API, using R and the R package httr"
date:   2017-08-07
dateCreated:  2017-07-07
lastModified: 2017-08-02
estimatedTime: 1 - 1.5 hours
packagesLibraries: [httr, devtools, neonDataStackR]
authors: [Claire K. Lunch]
contributors: [Claire Lunch, Christine Laney, Megan A. Jones]
categories: [self-paced-tutorial]
mainTag: API
tags: [R, API]
code1: 
image:
  feature:
  credit:
  creditlink:
permalink: /R/neon-api/
comments: false
---

{% include _toc.html %}

## About
This is a lesson in pulling data from the NEON API, using base R 
and the R package httr. There are 3 basic categories of NEON data:

1. Observational - Data collected by a human in the field, or in an analytical laboratory, e.g. beetle identification, foliar isotopes
1. Instrumentation - Data collected by an automated, streaming sensor, e.g. net radiation, soil carbon dioxide
1. Remote sensing - Data collected by the airborne observation platform, e.g. LIDAR, surface reflectance

This lesson covers the first two types of data. NEON remote sensing data are not currently available through the API.

**R Skill Level:** Intermediate - you've got the basics of `R` down.

**API Skill Level:** Beginner - you have little to no experience with APIs.

<div id="objectives" markdown="1">

# Goals / Objectives
After completing this activity, you will:

* Be able to pull observational, instrumentation, and geolocation data from the NEON API.
* Be able to transform API-accessed data from JSON to tabular format for analyses.

## Things You’ll Need To Complete This Tutorial
To complete this tutorial you will need the most current version of R and, 
preferably, RStudio loaded on your computer.

### Install R Packages

* **httr:** `install.packages("httr")`
* **jsonlite:** `install.packages("jsonlite")`
* **dplyr:** `install.packages("dplyr")`
* **devtools:** `install.packages("devtools")`
* **neonDataStackR:** `devtools::install_github("NEONScience/NEON-utilities/neonDataStackR")`

### Additional Resources

* [Website for the NEON API](http://data.neonscience.org/data-api)
* [GitHub repository for the NEON API](https://github.com/NEONScience/neon-data-api)
* [ROpenSci wrapper for the NEON API](https://github.com/ropenscilabs/nneo) (not covered in this tutorial)

</div>

## Anatomy of an API call
### Base URL: 
Specifics are appended to this in order to get the data or 
metadata you're looking for, but all calls to this API will include 
the base URL. For the NEON API, this is http://data.neonscience.org/api/v0 
(not clickable, because the base URL by itself will take you nowhere!)

### Endpoints: 
What type of data or metadata are you looking for?

* **~/products**
  Information about one or all of NEON's data products

* **~/sites**
  Information about data availability at the site specified in the call

* **~/locations**
  Spatial data for the NEON locations specified in the call

* **~/data**
  Data! By product, site, and date (in monthly chunks).

### Targets:
The specific product, site, or location you want to get data for.


## Observational data
Which product do you want to get data for? Consult the <a href="http://data.neonscience.org/data-product-catalog" target="_blank">data product catalog</a>.

We'll pick Breeding landbird point counts, DP1.10003.001

First query the products endpoint of the API to find out which sites and dates have data available. 
The structure of the URL for the call is base/endpoint/DPID, where DPID is the numbered identifier 
for the data product:


    library(httr)
    library(jsonlite)
    library(dplyr)

    ## Warning: package 'dplyr' was built under R version 3.4.1

    ## 
    ## Attaching package: 'dplyr'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     filter, lag

    ## The following objects are masked from 'package:base':
    ## 
    ##     intersect, setdiff, setequal, union

    req <- GET("http://data.neonscience.org/api/v0/products/DP1.10003.001")

The object returned from the GET has many layers of information. Entering the name of 
the object gives you some basic information about what you downloaded. The content() 
function returns the contents in the form of a highly nested list. This is typical of 
JSON-formatted data returned by APIs:


    req

    ## Response [http://data.neonscience.org/api/v0/products/DP1.10003.001]
    ##   Date: 2017-08-02 15:00
    ##   Status: 200
    ##   Content-Type: application/json;charset=UTF-8
    ##   Size: 7.18 kB

    req.content <- content(req, as="parsed")
    req.content

    ## $data
    ## $data$productCodeLong
    ## [1] "NEON.DOM.SITE.DP1.10003.001"
    ## 
    ## $data$productCode
    ## [1] "DP1.10003.001"
    ## 
    ## $data$productCodePresentation
    ## [1] "NEON.DP1.10003"
    ## 
    ## $data$productName
    ## [1] "Breeding landbird point counts"
    ## 
    ## $data$productDescription
    ## [1] "Count, distance from observer, and taxonomic identification of breeding landbirds observed during point counts"
    ## 
    ## $data$productStatus
    ## [1] "ACTIVE"
    ## 
    ## $data$productCategory
    ## [1] "Level 1 Data Product"
    ## 
    ## $data$productHasExpanded
    ## [1] TRUE
    ## 
    ## $data$productScienceTeamAbbr
    ## [1] "TOS"
    ## 
    ## $data$productScienceTeam
    ## [1] "Terrestrial Observation System (TOS)"
    ## 
    ## $data$productAbstract
    ## [1] "This data product contains the quality-controlled, native sampling resolution data from NEON's breeding landbird sampling. Breeding landbirds are defined as “smaller birds (usually exclusive of raptors and upland game birds) not usually associated with aquatic habitats” (Ralph et al. 1993). The breeding landbird point counts product provides records of species identification of all individuals observed during the 6-minute count period, as well as metadata which can be used to model detectability, e.g., weather, distances from observers to birds, and detection methods. The NEON point count method is adapted from the Integrated Monitoring in Bird Conservation Regions (IMBCR): Field protocol for spatially-balanced sampling of landbird populations (Hanni et al. 2017; http://bit.ly/2u2ChUB). For additional details, see protocol [NEON.DOC.014041](http://data.neonscience.org/api/v0/documents/NEON.DOC.014041vF): TOS Protocol and Procedure: Breeding Landbird Abundance and Diversity and science design [NEON.DOC.000916](http://data.neonscience.org/api/v0/documents/NEON.DOC.000916vB): TOS Science Design for Breeding Landbird Abundance and Diversity."
    ## 
    ## $data$productDesignDescription
    ## [1] "Depending on the size of the site, sampling for this product occurs either at either randomly distributed individual points or grids of nine points each. At larger sites, point count sampling occurs at five to fifteen 9-point grids, with grid centers collocated with distributed base plot centers (where plant, beetle, and/or soil sampling may also occur), if possible. At smaller sites (i.e., sites that cannot accommodate a minimum of 5 grids) point counts occur at the southwest corner (point 21) of 5-25 distributed base plots. Point counts are conducted once per breeding season at large sites and twice per breeding season at smaller sites. Point counts are six minutes long, with each minute tracked by the observer, following a two-minute settling-in period. All birds are recorded to species and sex, whenever possible, and the distance to each individual or flock is measured with a laser rangefinder, except in the case of flyovers."
    ## 
    ## $data$productStudyDescription
    ## [1] "This sampling occurs at all NEON terrestrial sites."
    ## 
    ## $data$productSensor
    ## NULL
    ## 
    ## $data$productRemarks
    ## [1] "Queries for this data product will return data collected during the date range specified for brd_perpoint and brd_countdata, but will return data from all dates for brd_personnel (quiz scores may occur over time periods which are distinct from when sampling occurs) and brd_references (which apply to a broad range of sampling dates). A record from brd_perPoint should have 6+ child records in brd_countdata, at least one per pointCountMinute. Duplicates or missing data may exist where protocol and/or data entry aberrations have occurred; users should check data carefully for anomalies before joining tables."
    ## 
    ## $data$themes
    ## $data$themes[[1]]
    ## [1] "Organisms, Populations, and Communities"
    ## 
    ## 
    ## $data$specs
    ## $data$specs[[1]]
    ## $data$specs[[1]]$specId
    ## [1] 2565
    ## 
    ## $data$specs[[1]]$specNumber
    ## [1] "NEON_bird_userGuide_vA"
    ## 
    ## 
    ## $data$specs[[2]]
    ## $data$specs[[2]]$specId
    ## [1] 2566
    ## 
    ## $data$specs[[2]]$specNumber
    ## [1] "NEON.DOC.00916vB"
    ## 
    ## 
    ## $data$specs[[3]]
    ## $data$specs[[3]]$specId
    ## [1] 2567
    ## 
    ## $data$specs[[3]]$specNumber
    ## [1] "NEON.DOC.014041vF"
    ## 
    ## 
    ## 
    ## $data$keywords
    ## $data$keywords[[1]]
    ## [1] "birds"
    ## 
    ## $data$keywords[[2]]
    ## [1] "diversity"
    ## 
    ## $data$keywords[[3]]
    ## [1] "taxonomy"
    ## 
    ## $data$keywords[[4]]
    ## [1] "community composition"
    ## 
    ## $data$keywords[[5]]
    ## [1] "distance sampling"
    ## 
    ## $data$keywords[[6]]
    ## [1] "avian"
    ## 
    ## $data$keywords[[7]]
    ## [1] "species composition"
    ## 
    ## $data$keywords[[8]]
    ## [1] "population"
    ## 
    ## $data$keywords[[9]]
    ## [1] "landbirds"
    ## 
    ## 
    ## $data$siteCodes
    ## $data$siteCodes[[1]]
    ## $data$siteCodes[[1]]$siteCode
    ## [1] "DSNY"
    ## 
    ## $data$siteCodes[[1]]$availableMonths
    ## $data$siteCodes[[1]]$availableMonths[[1]]
    ## [1] "2015-06"
    ## 
    ## $data$siteCodes[[1]]$availableMonths[[2]]
    ## [1] "2016-05"
    ## 
    ## 
    ## $data$siteCodes[[1]]$availableDataUrls
    ## $data$siteCodes[[1]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DSNY/2015-06"
    ## 
    ## $data$siteCodes[[1]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DSNY/2016-05"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[2]]
    ## $data$siteCodes[[2]]$siteCode
    ## [1] "BART"
    ## 
    ## $data$siteCodes[[2]]$availableMonths
    ## $data$siteCodes[[2]]$availableMonths[[1]]
    ## [1] "2015-06"
    ## 
    ## $data$siteCodes[[2]]$availableMonths[[2]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[2]]$availableDataUrls
    ## $data$siteCodes[[2]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/BART/2015-06"
    ## 
    ## $data$siteCodes[[2]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/BART/2016-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[3]]
    ## $data$siteCodes[[3]]$siteCode
    ## [1] "DELA"
    ## 
    ## $data$siteCodes[[3]]$availableMonths
    ## $data$siteCodes[[3]]$availableMonths[[1]]
    ## [1] "2015-06"
    ## 
    ## 
    ## $data$siteCodes[[3]]$availableDataUrls
    ## $data$siteCodes[[3]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DELA/2015-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[4]]
    ## $data$siteCodes[[4]]$siteCode
    ## [1] "OSBS"
    ## 
    ## $data$siteCodes[[4]]$availableMonths
    ## $data$siteCodes[[4]]$availableMonths[[1]]
    ## [1] "2016-05"
    ## 
    ## 
    ## $data$siteCodes[[4]]$availableDataUrls
    ## $data$siteCodes[[4]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/OSBS/2016-05"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[5]]
    ## $data$siteCodes[[5]]$siteCode
    ## [1] "GUAN"
    ## 
    ## $data$siteCodes[[5]]$availableMonths
    ## $data$siteCodes[[5]]$availableMonths[[1]]
    ## [1] "2015-05"
    ## 
    ## 
    ## $data$siteCodes[[5]]$availableDataUrls
    ## $data$siteCodes[[5]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/GUAN/2015-05"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[6]]
    ## $data$siteCodes[[6]]$siteCode
    ## [1] "TREE"
    ## 
    ## $data$siteCodes[[6]]$availableMonths
    ## $data$siteCodes[[6]]$availableMonths[[1]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[6]]$availableDataUrls
    ## $data$siteCodes[[6]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TREE/2016-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[7]]
    ## $data$siteCodes[[7]]$siteCode
    ## [1] "SCBI"
    ## 
    ## $data$siteCodes[[7]]$availableMonths
    ## $data$siteCodes[[7]]$availableMonths[[1]]
    ## [1] "2015-06"
    ## 
    ## $data$siteCodes[[7]]$availableMonths[[2]]
    ## [1] "2016-05"
    ## 
    ## $data$siteCodes[[7]]$availableMonths[[3]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[7]]$availableDataUrls
    ## $data$siteCodes[[7]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2015-06"
    ## 
    ## $data$siteCodes[[7]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2016-05"
    ## 
    ## $data$siteCodes[[7]]$availableDataUrls[[3]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2016-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[8]]
    ## $data$siteCodes[[8]]$siteCode
    ## [1] "JERC"
    ## 
    ## $data$siteCodes[[8]]$availableMonths
    ## $data$siteCodes[[8]]$availableMonths[[1]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[8]]$availableDataUrls
    ## $data$siteCodes[[8]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/JERC/2016-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[9]]
    ## $data$siteCodes[[9]]$siteCode
    ## [1] "UNDE"
    ## 
    ## $data$siteCodes[[9]]$availableMonths
    ## $data$siteCodes[[9]]$availableMonths[[1]]
    ## [1] "2016-06"
    ## 
    ## $data$siteCodes[[9]]$availableMonths[[2]]
    ## [1] "2016-07"
    ## 
    ## 
    ## $data$siteCodes[[9]]$availableDataUrls
    ## $data$siteCodes[[9]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/UNDE/2016-06"
    ## 
    ## $data$siteCodes[[9]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/UNDE/2016-07"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[10]]
    ## $data$siteCodes[[10]]$siteCode
    ## [1] "TALL"
    ## 
    ## $data$siteCodes[[10]]$availableMonths
    ## $data$siteCodes[[10]]$availableMonths[[1]]
    ## [1] "2015-06"
    ## 
    ## $data$siteCodes[[10]]$availableMonths[[2]]
    ## [1] "2016-07"
    ## 
    ## 
    ## $data$siteCodes[[10]]$availableDataUrls
    ## $data$siteCodes[[10]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TALL/2015-06"
    ## 
    ## $data$siteCodes[[10]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TALL/2016-07"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[11]]
    ## $data$siteCodes[[11]]$siteCode
    ## [1] "STER"
    ## 
    ## $data$siteCodes[[11]]$availableMonths
    ## $data$siteCodes[[11]]$availableMonths[[1]]
    ## [1] "2015-05"
    ## 
    ## $data$siteCodes[[11]]$availableMonths[[2]]
    ## [1] "2016-05"
    ## 
    ## 
    ## $data$siteCodes[[11]]$availableDataUrls
    ## $data$siteCodes[[11]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STER/2015-05"
    ## 
    ## $data$siteCodes[[11]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STER/2016-05"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[12]]
    ## $data$siteCodes[[12]]$siteCode
    ## [1] "ORNL"
    ## 
    ## $data$siteCodes[[12]]$availableMonths
    ## $data$siteCodes[[12]]$availableMonths[[1]]
    ## [1] "2016-05"
    ## 
    ## $data$siteCodes[[12]]$availableMonths[[2]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[12]]$availableDataUrls
    ## $data$siteCodes[[12]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/ORNL/2016-05"
    ## 
    ## $data$siteCodes[[12]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/ORNL/2016-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[13]]
    ## $data$siteCodes[[13]]$siteCode
    ## [1] "CPER"
    ## 
    ## $data$siteCodes[[13]]$availableMonths
    ## $data$siteCodes[[13]]$availableMonths[[1]]
    ## [1] "2015-05"
    ## 
    ## $data$siteCodes[[13]]$availableMonths[[2]]
    ## [1] "2016-05"
    ## 
    ## 
    ## $data$siteCodes[[13]]$availableDataUrls
    ## $data$siteCodes[[13]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/CPER/2015-05"
    ## 
    ## $data$siteCodes[[13]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/CPER/2016-05"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[14]]
    ## $data$siteCodes[[14]]$siteCode
    ## [1] "STEI"
    ## 
    ## $data$siteCodes[[14]]$availableMonths
    ## $data$siteCodes[[14]]$availableMonths[[1]]
    ## [1] "2016-05"
    ## 
    ## $data$siteCodes[[14]]$availableMonths[[2]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[14]]$availableDataUrls
    ## $data$siteCodes[[14]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STEI/2016-05"
    ## 
    ## $data$siteCodes[[14]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STEI/2016-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[15]]
    ## $data$siteCodes[[15]]$siteCode
    ## [1] "GRSM"
    ## 
    ## $data$siteCodes[[15]]$availableMonths
    ## $data$siteCodes[[15]]$availableMonths[[1]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[15]]$availableDataUrls
    ## $data$siteCodes[[15]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/GRSM/2016-06"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[16]]
    ## $data$siteCodes[[16]]$siteCode
    ## [1] "WOOD"
    ## 
    ## $data$siteCodes[[16]]$availableMonths
    ## $data$siteCodes[[16]]$availableMonths[[1]]
    ## [1] "2015-07"
    ## 
    ## 
    ## $data$siteCodes[[16]]$availableDataUrls
    ## $data$siteCodes[[16]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/WOOD/2015-07"
    ## 
    ## 
    ## 
    ## $data$siteCodes[[17]]
    ## $data$siteCodes[[17]]$siteCode
    ## [1] "HARV"
    ## 
    ## $data$siteCodes[[17]]$availableMonths
    ## $data$siteCodes[[17]]$availableMonths[[1]]
    ## [1] "2015-05"
    ## 
    ## $data$siteCodes[[17]]$availableMonths[[2]]
    ## [1] "2015-06"
    ## 
    ## $data$siteCodes[[17]]$availableMonths[[3]]
    ## [1] "2016-06"
    ## 
    ## 
    ## $data$siteCodes[[17]]$availableDataUrls
    ## $data$siteCodes[[17]]$availableDataUrls[[1]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2015-05"
    ## 
    ## $data$siteCodes[[17]]$availableDataUrls[[2]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2015-06"
    ## 
    ## $data$siteCodes[[17]]$availableDataUrls[[3]]
    ## [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2016-06"

To get a more accessible view of which sites have data for which months, you'll 
need to extract data from the nested list. There are a variety of ways to do this, 
in this tutorial we'll explore a couple of them. Here we'll use `fromJSON()`, in the 
jsonlite package, which doesn't fully flatten the nested list, but gets us the part 
we need. To use it, we need a text version of the content:


    req.text <- content(req, as="text")
    avail <- fromJSON(req.text, simplifyDataFrame=T, flatten=T)
    avail

    ## $data
    ## $data$productCodeLong
    ## [1] "NEON.DOM.SITE.DP1.10003.001"
    ## 
    ## $data$productCode
    ## [1] "DP1.10003.001"
    ## 
    ## $data$productCodePresentation
    ## [1] "NEON.DP1.10003"
    ## 
    ## $data$productName
    ## [1] "Breeding landbird point counts"
    ## 
    ## $data$productDescription
    ## [1] "Count, distance from observer, and taxonomic identification of breeding landbirds observed during point counts"
    ## 
    ## $data$productStatus
    ## [1] "ACTIVE"
    ## 
    ## $data$productCategory
    ## [1] "Level 1 Data Product"
    ## 
    ## $data$productHasExpanded
    ## [1] TRUE
    ## 
    ## $data$productScienceTeamAbbr
    ## [1] "TOS"
    ## 
    ## $data$productScienceTeam
    ## [1] "Terrestrial Observation System (TOS)"
    ## 
    ## $data$productAbstract
    ## [1] "This data product contains the quality-controlled, native sampling resolution data from NEON's breeding landbird sampling. Breeding landbirds are defined as “smaller birds (usually exclusive of raptors and upland game birds) not usually associated with aquatic habitats” (Ralph et al. 1993). The breeding landbird point counts product provides records of species identification of all individuals observed during the 6-minute count period, as well as metadata which can be used to model detectability, e.g., weather, distances from observers to birds, and detection methods. The NEON point count method is adapted from the Integrated Monitoring in Bird Conservation Regions (IMBCR): Field protocol for spatially-balanced sampling of landbird populations (Hanni et al. 2017; http://bit.ly/2u2ChUB). For additional details, see protocol [NEON.DOC.014041](http://data.neonscience.org/api/v0/documents/NEON.DOC.014041vF): TOS Protocol and Procedure: Breeding Landbird Abundance and Diversity and science design [NEON.DOC.000916](http://data.neonscience.org/api/v0/documents/NEON.DOC.000916vB): TOS Science Design for Breeding Landbird Abundance and Diversity."
    ## 
    ## $data$productDesignDescription
    ## [1] "Depending on the size of the site, sampling for this product occurs either at either randomly distributed individual points or grids of nine points each. At larger sites, point count sampling occurs at five to fifteen 9-point grids, with grid centers collocated with distributed base plot centers (where plant, beetle, and/or soil sampling may also occur), if possible. At smaller sites (i.e., sites that cannot accommodate a minimum of 5 grids) point counts occur at the southwest corner (point 21) of 5-25 distributed base plots. Point counts are conducted once per breeding season at large sites and twice per breeding season at smaller sites. Point counts are six minutes long, with each minute tracked by the observer, following a two-minute settling-in period. All birds are recorded to species and sex, whenever possible, and the distance to each individual or flock is measured with a laser rangefinder, except in the case of flyovers."
    ## 
    ## $data$productStudyDescription
    ## [1] "This sampling occurs at all NEON terrestrial sites."
    ## 
    ## $data$productSensor
    ## NULL
    ## 
    ## $data$productRemarks
    ## [1] "Queries for this data product will return data collected during the date range specified for brd_perpoint and brd_countdata, but will return data from all dates for brd_personnel (quiz scores may occur over time periods which are distinct from when sampling occurs) and brd_references (which apply to a broad range of sampling dates). A record from brd_perPoint should have 6+ child records in brd_countdata, at least one per pointCountMinute. Duplicates or missing data may exist where protocol and/or data entry aberrations have occurred; users should check data carefully for anomalies before joining tables."
    ## 
    ## $data$themes
    ## [1] "Organisms, Populations, and Communities"
    ## 
    ## $data$specs
    ##   specId             specNumber
    ## 1   2565 NEON_bird_userGuide_vA
    ## 2   2566       NEON.DOC.00916vB
    ## 3   2567      NEON.DOC.014041vF
    ## 
    ## $data$keywords
    ## [1] "birds"                 "diversity"             "taxonomy"             
    ## [4] "community composition" "distance sampling"     "avian"                
    ## [7] "species composition"   "population"            "landbirds"            
    ## 
    ## $data$siteCodes
    ##    siteCode           availableMonths
    ## 1      DSNY          2015-06, 2016-05
    ## 2      BART          2015-06, 2016-06
    ## 3      DELA                   2015-06
    ## 4      OSBS                   2016-05
    ## 5      GUAN                   2015-05
    ## 6      TREE                   2016-06
    ## 7      SCBI 2015-06, 2016-05, 2016-06
    ## 8      JERC                   2016-06
    ## 9      UNDE          2016-06, 2016-07
    ## 10     TALL          2015-06, 2016-07
    ## 11     STER          2015-05, 2016-05
    ## 12     ORNL          2016-05, 2016-06
    ## 13     CPER          2015-05, 2016-05
    ## 14     STEI          2016-05, 2016-06
    ## 15     GRSM                   2016-06
    ## 16     WOOD                   2015-07
    ## 17     HARV 2015-05, 2015-06, 2016-06
    ##                                                                                                                                                                                                      availableDataUrls
    ## 1                                                                         http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DSNY/2015-06, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DSNY/2016-05
    ## 2                                                                         http://data.neonscience.org:80/api/v0/data/DP1.10003.001/BART/2015-06, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/BART/2016-06
    ## 3                                                                                                                                                http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DELA/2015-06
    ## 4                                                                                                                                                http://data.neonscience.org:80/api/v0/data/DP1.10003.001/OSBS/2016-05
    ## 5                                                                                                                                                http://data.neonscience.org:80/api/v0/data/DP1.10003.001/GUAN/2015-05
    ## 6                                                                                                                                                http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TREE/2016-06
    ## 7  http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2015-06, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2016-05, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2016-06
    ## 8                                                                                                                                                http://data.neonscience.org:80/api/v0/data/DP1.10003.001/JERC/2016-06
    ## 9                                                                         http://data.neonscience.org:80/api/v0/data/DP1.10003.001/UNDE/2016-06, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/UNDE/2016-07
    ## 10                                                                        http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TALL/2015-06, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TALL/2016-07
    ## 11                                                                        http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STER/2015-05, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STER/2016-05
    ## 12                                                                        http://data.neonscience.org:80/api/v0/data/DP1.10003.001/ORNL/2016-05, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/ORNL/2016-06
    ## 13                                                                        http://data.neonscience.org:80/api/v0/data/DP1.10003.001/CPER/2015-05, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/CPER/2016-05
    ## 14                                                                        http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STEI/2016-05, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STEI/2016-06
    ## 15                                                                                                                                               http://data.neonscience.org:80/api/v0/data/DP1.10003.001/GRSM/2016-06
    ## 16                                                                                                                                               http://data.neonscience.org:80/api/v0/data/DP1.10003.001/WOOD/2015-07
    ## 17 http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2015-05, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2015-06, http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2016-06

The object contains keywords, general info about the data product, and 
references for documentation, as well as data availability, which is what we 
need to tell us what we can download. 


    bird.urls <- unlist(avail$data$siteCodes$availableDataUrls)
    bird.urls

    ##  [1] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DSNY/2015-06"
    ##  [2] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DSNY/2016-05"
    ##  [3] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/BART/2015-06"
    ##  [4] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/BART/2016-06"
    ##  [5] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/DELA/2015-06"
    ##  [6] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/OSBS/2016-05"
    ##  [7] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/GUAN/2015-05"
    ##  [8] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TREE/2016-06"
    ##  [9] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2015-06"
    ## [10] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2016-05"
    ## [11] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/SCBI/2016-06"
    ## [12] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/JERC/2016-06"
    ## [13] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/UNDE/2016-06"
    ## [14] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/UNDE/2016-07"
    ## [15] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TALL/2015-06"
    ## [16] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/TALL/2016-07"
    ## [17] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STER/2015-05"
    ## [18] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STER/2016-05"
    ## [19] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/ORNL/2016-05"
    ## [20] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/ORNL/2016-06"
    ## [21] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/CPER/2015-05"
    ## [22] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/CPER/2016-05"
    ## [23] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STEI/2016-05"
    ## [24] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/STEI/2016-06"
    ## [25] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/GRSM/2016-06"
    ## [26] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/WOOD/2015-07"
    ## [27] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2015-05"
    ## [28] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2015-06"
    ## [29] "http://data.neonscience.org:80/api/v0/data/DP1.10003.001/HARV/2016-06"

These are the URLs showing us what files are available for each month where 
there are data. For simplicity, we'll only query one month now.


    brd <- GET(bird.urls[6])
    brd.files <- fromJSON(content(brd, as="text"))
    brd.files$data$files

    ##                              crc32
    ## 1 bf4be432615df0de30c1a7270ba0a679
    ## 2 9bc7bc357209579748cb103a899933b0
    ## 3 6b2016b3dc35f88bce89951be84a586a
    ## 4 c62a9c65a37eea88c815d055579eb64b
    ## 5 37fe098d4c1126f3b17e93d117f7f8da
    ## 6 36fe5d37b65b29498129bb3062ae7539
    ## 7 b9124414cdeb18f0425b18d647c23edd
    ##                                                                           name
    ## 1                                                NEON.DP1.10003.001_readme.txt
    ## 2                   NEON.D03.OSBS.DP1.10003.001.variables.20170720T182621Z.csv
    ## 3                            NEON.D03.OSBS.DP1.10003.001.20150101-20160613.xml
    ## 4                  NEON.D03.OSBS.DP0.10003.001.validation.20170720T182621Z.csv
    ## 5 NEON.D03.OSBS.DP1.10003.001.brd_countdata.2016-05.basic.20170720T182621Z.csv
    ## 6  NEON.D03.OSBS.DP1.10003.001.brd_perpoint.2016-05.basic.20170720T182621Z.csv
    ## 7               NEON.D03.OSBS.DP1.10003.001.2016-05.basic.20170720T182621Z.zip
    ##     size
    ## 1  11098
    ## 2   7280
    ## 3  70188
    ## 4   9826
    ## 5 306564
    ## 6  30866
    ## 7  62063
    ##                                                                                                                                                                                                                                                                                                                                                                                                                                                                            url
    ## 1                                                https://neon-prod-pub-1.s3.data.neonscience.org/NEON.DOM.SITE.DP1.10003.001/PROV/OSBS/20160501T000000--20160601T000000/basic/NEON.DP1.10003.001_readme.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20170802T150001Z&X-Amz-SignedHeaders=host&X-Amz-Expires=3600&X-Amz-Credential=pub-internal-read%2F20170802%2Fdata%2Fs3%2Faws4_request&X-Amz-Signature=f55f0657c7180c40d741ae39590f1fe2e195a9215a76096868f4fb3a3bf1605f
    ## 2                   https://neon-prod-pub-1.s3.data.neonscience.org/NEON.DOM.SITE.DP1.10003.001/PROV/OSBS/20160501T000000--20160601T000000/basic/NEON.D03.OSBS.DP1.10003.001.variables.20170720T182621Z.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20170802T150001Z&X-Amz-SignedHeaders=host&X-Amz-Expires=3600&X-Amz-Credential=pub-internal-read%2F20170802%2Fdata%2Fs3%2Faws4_request&X-Amz-Signature=ae583021de64e8e69d55972125eeef4d6efd201d440654aeb1db71733f3b62d5
    ## 3                            https://neon-prod-pub-1.s3.data.neonscience.org/NEON.DOM.SITE.DP1.10003.001/PROV/OSBS/20160501T000000--20160601T000000/basic/NEON.D03.OSBS.DP1.10003.001.20150101-20160613.xml?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20170802T150001Z&X-Amz-SignedHeaders=host&X-Amz-Expires=3600&X-Amz-Credential=pub-internal-read%2F20170802%2Fdata%2Fs3%2Faws4_request&X-Amz-Signature=32f4038dab989f184b80b05bde265fb422e3b871e72df3532bb82661b5138153
    ## 4                  https://neon-prod-pub-1.s3.data.neonscience.org/NEON.DOM.SITE.DP1.10003.001/PROV/OSBS/20160501T000000--20160601T000000/basic/NEON.D03.OSBS.DP0.10003.001.validation.20170720T182621Z.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20170802T150001Z&X-Amz-SignedHeaders=host&X-Amz-Expires=3600&X-Amz-Credential=pub-internal-read%2F20170802%2Fdata%2Fs3%2Faws4_request&X-Amz-Signature=6469b8e644504f97a0318b5c61e1d6c24949fb14b5dd464264d7f2ee1e230961
    ## 5 https://neon-prod-pub-1.s3.data.neonscience.org/NEON.DOM.SITE.DP1.10003.001/PROV/OSBS/20160501T000000--20160601T000000/basic/NEON.D03.OSBS.DP1.10003.001.brd_countdata.2016-05.basic.20170720T182621Z.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20170802T150001Z&X-Amz-SignedHeaders=host&X-Amz-Expires=3600&X-Amz-Credential=pub-internal-read%2F20170802%2Fdata%2Fs3%2Faws4_request&X-Amz-Signature=7a6acec28d445f24685083795a0537555ed6a0bff1f822d4232f58c997ef177a
    ## 6  https://neon-prod-pub-1.s3.data.neonscience.org/NEON.DOM.SITE.DP1.10003.001/PROV/OSBS/20160501T000000--20160601T000000/basic/NEON.D03.OSBS.DP1.10003.001.brd_perpoint.2016-05.basic.20170720T182621Z.csv?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20170802T150001Z&X-Amz-SignedHeaders=host&X-Amz-Expires=3600&X-Amz-Credential=pub-internal-read%2F20170802%2Fdata%2Fs3%2Faws4_request&X-Amz-Signature=794bcfdd08b9df93e5194c57c801ae99cd2967b3a89778b381be4540f7b753e0
    ## 7               https://neon-prod-pub-1.s3.data.neonscience.org/NEON.DOM.SITE.DP1.10003.001/PROV/OSBS/20160501T000000--20160601T000000/basic/NEON.D03.OSBS.DP1.10003.001.2016-05.basic.20170720T182621Z.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20170802T150001Z&X-Amz-SignedHeaders=host&X-Amz-Expires=3600&X-Amz-Credential=pub-internal-read%2F20170802%2Fdata%2Fs3%2Faws4_request&X-Amz-Signature=c02b985054aa77fb1844150d39e0f46e9eb9334198a748860fba1ad6df7fb913

And now we have the names of the data files available for this site and 
month, and URLs where we can get the data files themselves. We'll use 
the file names to pick which ones we want. To translate, available files for 
July 2015 at Woodworth are all of the following: 

* NEON.D09.WOOD.DP1.10003.001.2015-07.expanded.20170720T182547Z.zip
  + zip of all files in the expanded package
* NEON.D09.WOOD.DP1.10003.001.brd_countdata.2015-07.expanded.20170720T182547Z.csv
  + count data table, expanded package version: counts of birds at each point
* NEON.D09.WOOD.DP1.10003.001.brd_perpoint.2015-07.expanded.20170720T182547Z.csv
  + point data table, expanded package version: metadata at each observation point
* NEON.Bird Conservancy of the Rockies.brd_personnel.csv
  + personnel data table: accuracy scores for bird observers
* NEON.D09.WOOD.DP1.10003.001.2015-07.basic.20170720T182547Z.zip
  + zip of all files in the basic package
* NEON.D09.WOOD.DP1.10003.001.brd_countdata.2015-07.basic.20170720T182547Z.csv
  + count data table, basic package version: counts of birds at each point
* NEON.D09.WOOD.DP1.10003.001.brd_perpoint.2015-07.basic.20170720T182547Z.csv
  + point data table, basic package version: metadata at each observation point
* NEON.DP1.10003.001_readme.txt
  + readme for the data product (not specific to dates or location)
  + appears twice in the list, since it's in both the basic and expanded package
* NEON.D09.WOOD.DP1.10003.001.20150101-20160613.xml
  + Ecological Metadata Language (EML) file
  + appears twice in the list, since it's in both the basic and expanded package
* NEON.D09.WOOD.DP0.10003.001.validation.20170720T182547Z.csv
  + validation file for the data product: lists input data and data entry rules
  + appears twice in the list, since it's in both the basic and expanded package
* NEON.D09.WOOD.DP1.10003.001.variables.20170720T182547Z.csv
  + variables file for the data product: lists data fields in downloaded tables
  + appears twice in the list, since it's in both the basic and expanded package


We'll get the data tables for the point data and count data in the basic 
package. The list of files doesn't return in the same order every time, so we 
won't use position in the list to select. Plus, we want code we can re-use 
when getting data from other sites and other months. So we select files 
based on the data table name and the package name:


    brd.count <- read.delim(brd.files$data$files$url
                            [intersect(grep("countdata", brd.files$data$files$name),
                                        grep("basic", brd.files$data$files$name))], sep=",")
    
    brd.point <- read.delim(brd.files$data$files$url
                            [intersect(grep("perpoint", brd.files$data$files$name),
                                        grep("basic", brd.files$data$files$name))], sep=",")

Just to prove the files we pulled have actual data in them, a quick graphic:


    clusterBySp <- brd.count %>% group_by(scientificName) %>% filter(plotID=="WOOD_013") %>%
      summarize(total=sum(clusterSize))
    clusterBySp <- clusterBySp[order(clusterBySp$total, decreasing=T),]
    barplot(clusterBySp$total, names.arg=clusterBySp$scientificName, ylab="Total")

    ## Warning in min(w.l): no non-missing arguments to min; returning Inf

    ## Warning in max(w.r): no non-missing arguments to max; returning -Inf

    ## Warning in min(x): no non-missing arguments to min; returning Inf

    ## Warning in max(x): no non-missing arguments to max; returning -Inf

    ## Error in plot.window(xlim, ylim, log = log, ...): need finite 'xlim' values

![ ]({{ site.baseurl }}/images/rfigs/NEON-API/NEON_API_ESA_2017/os-plot-bird-data-1.png)


## Instrumentation data
The process is essentially the same for sensor data. We'll do the same series of 
queries for Soil temperature, DP1.00041.001


    req <- GET("http://data.neonscience.org/api/v0/products/DP1.00041.001")
    avail <- fromJSON(content(req, as="text"), simplifyDataFrame=T, flatten=T)
    temp.urls <- unlist(avail$data$siteCodes$availableDataUrls)
    tmp <- GET(temp.urls[20])
    tmp.files <- fromJSON(content(tmp, as="text"))
    tmp.files$data$files$name

    ##  [1] "NEON.D11.CLBJ.DP1.00041.001.00000.005.503.001.ST_1_minute.csv" 
    ##  [2] "NEON.D11.CLBJ.DP1.00041.001.00000.001.508.030.ST_30_minute.csv"
    ##  [3] "NEON.D11.CLBJ.DP1.00041.001.00000.004.508.001.ST_1_minute.csv" 
    ##  [4] "NEON.D11.CLBJ.DP1.00041.001.00000.004.509.001.ST_1_minute.csv" 
    ##  [5] "NEON.D11.CLBJ.DP1.00041.001.00000.003.507.001.ST_1_minute.csv" 
    ##  [6] "NEON.D11.CLBJ.DP1.00041.001.00000.002.505.030.ST_30_minute.csv"
    ##  [7] "NEON.D11.CLBJ.DP1.00041.001.00000.003.504.030.ST_30_minute.csv"
    ##  [8] "NEON.D11.CLBJ.DP1.00041.001.00000.002.503.001.ST_1_minute.csv" 
    ##  [9] "NEON.D11.CLBJ.DP1.00041.001.00000.003.508.030.ST_30_minute.csv"
    ## [10] "NEON.D11.CLBJ.DP1.00041.001.00000.001.509.030.ST_30_minute.csv"
    ## [11] "NEON.D11.CLBJ.DP1.00041.001.00000.001.505.001.ST_1_minute.csv" 
    ## [12] "NEON.D11.CLBJ.DP1.00041.001.00000.003.501.001.ST_1_minute.csv" 
    ## [13] "NEON.D11.CLBJ.DP1.00041.001.00000.005.504.001.ST_1_minute.csv" 
    ## [14] "NEON.D11.CLBJ.DP1.00041.001.00000.002.509.030.ST_30_minute.csv"
    ## [15] "NEON.D11.CLBJ.DP1.00041.001.00000.005.506.001.ST_1_minute.csv" 
    ## [16] "NEON.D11.CLBJ.DP1.00041.001.00000.003.503.030.ST_30_minute.csv"
    ## [17] "NEON.D11.CLBJ.DP1.00041.001.00000.005.508.001.ST_1_minute.csv" 
    ## [18] "NEON.D11.CLBJ.DP1.00041.001.00000.002.508.001.ST_1_minute.csv" 
    ## [19] "NEON.D11.CLBJ.DP1.00041.001.00000.003.509.001.ST_1_minute.csv" 
    ## [20] "NEON.D11.CLBJ.DP1.00041.001.00000.004.504.030.ST_30_minute.csv"
    ## [21] "NEON.D11.CLBJ.DP1.00041.001.00000.002.504.001.ST_1_minute.csv" 
    ## [22] "NEON.D11.CLBJ.DP1.00041.001.00000.001.501.001.ST_1_minute.csv" 
    ## [23] "NEON.D11.CLBJ.DP1.00041.001.00000.005.502.001.ST_1_minute.csv" 
    ## [24] "NEON.D11.CLBJ.DP1.00041.001.00000.002.503.030.ST_30_minute.csv"
    ## [25] "NEON.D11.CLBJ.DP1.00041.001.00000.003.506.001.ST_1_minute.csv" 
    ## [26] "NEON.D11.CLBJ.DP1.00041.001.00000.005.503.030.ST_30_minute.csv"
    ## [27] "NEON.D11.CLBJ.DP1.00041.001.00000.004.502.030.ST_30_minute.csv"
    ## [28] "NEON.D11.CLBJ.DP1.00041.001.00000.001.502.001.ST_1_minute.csv" 
    ## [29] "NEON.D11.CLBJ.DP1.00041.001.00000.001.504.030.ST_30_minute.csv"
    ## [30] "NEON.D11.CLBJ.DP1.00041.001.00000.005.508.030.ST_30_minute.csv"
    ## [31] "NEON.D11.CLBJ.DP1.00041.001.00000.002.501.030.ST_30_minute.csv"
    ## [32] "NEON.D11.CLBJ.DP1.00041.001.00000.004.508.030.ST_30_minute.csv"
    ## [33] "NEON.D11.CLBJ.DP1.00041.001.00000.001.509.001.ST_1_minute.csv" 
    ## [34] "NEON.D11.CLBJ.DP1.00041.001.00000.001.505.030.ST_30_minute.csv"
    ## [35] "NEON.D11.CLBJ.DP1.00041.001.00000.002.508.030.ST_30_minute.csv"
    ## [36] "NEON.D11.CLBJ.DP1.00041.001.00000.004.509.030.ST_30_minute.csv"
    ## [37] "NEON.D11.CLBJ.DP1.00041.001.00000.001.504.001.ST_1_minute.csv" 
    ## [38] "NEON.D11.CLBJ.DP1.00041.001.00000.004.503.030.ST_30_minute.csv"
    ## [39] "NEON.D11.CLBJ.DP1.00041.001.00000.002.509.001.ST_1_minute.csv" 
    ## [40] "NEON.D11.CLBJ.DP1.00041.001.00000.005.507.001.ST_1_minute.csv" 
    ## [41] "NEON.D11.CLBJ.DP1.00041.001.00000.005.505.001.ST_1_minute.csv" 
    ## [42] "NEON.D11.CLBJ.DP1.00041.001.00000.004.507.030.ST_30_minute.csv"
    ## [43] "NEON.D11.CLBJ.DP1.00041.001.00000.005.506.030.ST_30_minute.csv"
    ## [44] "NEON.D11.CLBJ.DP1.00041.001.00000.004.501.001.ST_1_minute.csv" 
    ## [45] "NEON.D11.CLBJ.DP1.00041.001.00000.001.507.030.ST_30_minute.csv"
    ## [46] "NEON.D11.CLBJ.DP1.00041.001.00000.003.502.001.ST_1_minute.csv" 
    ## [47] "NEON.D11.CLBJ.DP1.00041.001.00000.005.505.030.ST_30_minute.csv"
    ## [48] "NEON.D11.CLBJ.DP1.00041.001.00000.003.502.030.ST_30_minute.csv"
    ## [49] "NEON.D11.CLBJ.DP1.00041.001.00000.001.501.030.ST_30_minute.csv"
    ## [50] "NEON.D11.CLBJ.DP1.00041.001.00000.003.509.030.ST_30_minute.csv"
    ## [51] "NEON.D11.CLBJ.DP1.00041.001.00000.001.502.030.ST_30_minute.csv"
    ## [52] "NEON.D11.CLBJ.DP1.00041.001.00000.004.505.001.ST_1_minute.csv" 
    ## [53] "NEON.D11.CLBJ.DP1.00041.001.00000.003.507.030.ST_30_minute.csv"
    ## [54] "NEON.D11.CLBJ.DP1.00041.001.00000.002.502.001.ST_1_minute.csv" 
    ## [55] "NEON.D11.CLBJ.DP1.00041.001.00000.002.502.030.ST_30_minute.csv"
    ## [56] "NEON.D11.CLBJ.DP1.00041.001.00000.001.506.030.ST_30_minute.csv"
    ## [57] "NEON.D11.CLBJ.DP1.00041.001.00000.002.506.001.ST_1_minute.csv" 
    ## [58] "NEON.D11.CLBJ.DP1.00041.001.00000.004.506.001.ST_1_minute.csv" 
    ## [59] "NEON.D11.CLBJ.DP1.00041.001.00000.002.507.030.ST_30_minute.csv"
    ## [60] "NEON.D11.CLBJ.DP1.00041.001.20170501-20170601.xml"             
    ## [61] "NEON.D11.CLBJ.DP1.00041.001.00000.004.503.001.ST_1_minute.csv" 
    ## [62] "NEON.D11.CLBJ.DP1.00041.001.00000.004.506.030.ST_30_minute.csv"
    ## [63] "NEON.D11.CLBJ.DP1.00041.001.00000.001.508.001.ST_1_minute.csv" 
    ## [64] "NEON.D11.CLBJ.DP1.00041.001.00000.004.505.030.ST_30_minute.csv"
    ## [65] "NEON.D11.CLBJ.DP1.00041.001.00000.004.504.001.ST_1_minute.csv" 
    ## [66] "NEON.D11.CLBJ.DP1.00041.001.00000.004.507.001.ST_1_minute.csv" 
    ## [67] "NEON.D11.CLBJ.DP1.00041.001.00000.005.507.030.ST_30_minute.csv"
    ## [68] "NEON.D11.CLBJ.DP1.00041.001.00000.005.501.030.ST_30_minute.csv"
    ## [69] "NEON.D11.CLBJ.DP1.00041.001.00000.004.501.030.ST_30_minute.csv"
    ## [70] "NEON.D11.CLBJ.DP1.00041.001.00000.005.509.001.ST_1_minute.csv" 
    ## [71] "NEON.D11.CLBJ.DP1.00041.001.00000.005.509.030.ST_30_minute.csv"
    ## [72] "NEON.D11.CLBJ.DP1.00041.001.00000.001.503.001.ST_1_minute.csv" 
    ## [73] "NEON.D11.CLBJ.DP1.00041.001.00000.001.507.001.ST_1_minute.csv" 
    ## [74] "NEON.D11.CLBJ.DP1.00041.001.00000.002.506.030.ST_30_minute.csv"
    ## [75] "NEON.D11.CLBJ.DP1.00041.001.00000.001.506.001.ST_1_minute.csv" 
    ## [76] "NEON.D11.CLBJ.DP1.00041.001.00000.001.503.030.ST_30_minute.csv"
    ## [77] "NEON.D11.CLBJ.DP1.00041.001.00000.003.501.030.ST_30_minute.csv"
    ## [78] "NEON.D11.CLBJ.DP1.00041.001.00000.003.506.030.ST_30_minute.csv"
    ## [79] "NEON.D11.CLBJ.DP1.00041.001.00000.005.502.030.ST_30_minute.csv"
    ## [80] "NEON.D11.CLBJ.DP1.00041.001.00000.004.502.001.ST_1_minute.csv" 
    ## [81] "NEON.D11.CLBJ.DP1.00041.001.00000.003.503.001.ST_1_minute.csv" 
    ## [82] "NEON.D11.CLBJ.DP1.00041.001.00000.005.504.030.ST_30_minute.csv"
    ## [83] "NEON.D11.CLBJ.DP1.00041.001.00000.003.505.001.ST_1_minute.csv" 
    ## [84] "NEON.D11.CLBJ.DP1.00041.001.00000.003.508.001.ST_1_minute.csv" 
    ## [85] "NEON.D11.CLBJ.DP1.00041.001.00000.002.505.001.ST_1_minute.csv" 
    ## [86] "NEON.D11.CLBJ.DP1.00041.001.00000.005.501.001.ST_1_minute.csv" 
    ## [87] "NEON.D11.CLBJ.DP1.00041.001.00000.002.504.030.ST_30_minute.csv"
    ## [88] "NEON.D11.CLBJ.DP1.00041.001.00000.002.507.001.ST_1_minute.csv" 
    ## [89] "NEON.D11.CLBJ.DP1.00041.001.00000.003.505.030.ST_30_minute.csv"
    ## [90] "NEON.D11.CLBJ.DP1.00041.001.00000.002.501.001.ST_1_minute.csv" 
    ## [91] "NEON.D11.CLBJ.DP1.00041.001.00000.003.504.001.ST_1_minute.csv"

These are a little more cryptic. The part after the 00000 is: 
[soil plot number].[depth].[averaging interval].[data table name]

So NEON.D13.NIWO.DP1.00041.001.00000.003.502.030.ST_30_minute.csv is 
the 30-minute mean of soil temperature at Niwot Ridge in soil plot 3, 
2nd depth below the surface.

Go get it:


    soil.temp <- read.delim(tmp.files$data$files$url
                            [grep("003.502.030", tmp.files$data$files$name)], sep=",")

And again, a plot to show we've downloaded something with data in it:


    plot(soil.temp$soilTempMean~soil.temp$startDateTime, pch=".", xlab="Date", ylab="T")

![ ]({{ site.baseurl }}/images/rfigs/NEON-API/NEON_API_ESA_2017/os-plot-soil-data-1.png)






